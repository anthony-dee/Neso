!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Neso=e():t.Neso=e()}(self,(function(){return function(){"use strict";var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{NavBar:function(){return i}});class i{constructor(t){this.navBar=t,this.navBar.classList.remove("no-js"),this.menuToggle=this.navBar.querySelector(".nav-menu-toggle"),this.menu=this.navBar.querySelector(".nav-main-menu"),window.innerWidth>=768&&this.menu.setAttribute("aria-hidden","false"),this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.transitionTime=this.prefersReducedMotion?10:400,this.setMenuHeight(),document.documentElement.style.setProperty("--nav-height",`${this.getMenuHeight()}px`),this.easing="ease",this.animation=null,this.isNavMenuOpen=!1,this.isClosing=!1,this.isExpanding=!1,this.currentMenuButton=!1,this.registerListeners(),this.calculateOpenMenuHeight(),this.setAriaAttributes()}registerListeners(){this.navBar.addEventListener("click",(t=>{if(t.target.closest(".nav-menu-toggle")&&("false"===this.menuToggle.getAttribute("aria-expanded")?(this.menuToggle.setAttribute("aria-expanded","true"),this.menu.setAttribute("aria-hidden","false")):(this.menuToggle.setAttribute("aria-expanded","false"),this.menu.setAttribute("aria-hidden","true")),this.toggleMainMenu(t)),t.target.closest(".nav-dropdown-toggle")){const e=t.target;this.currentMenuButton&&this.currentMenuButton!==e&&this.toggleDropdown(this.currentMenuButton),this.toggleDropdown(e)}}),!1),document.addEventListener("click",(t=>{this.closeOpenMenu(t)})),window.addEventListener("resize",(()=>{window.innerWidth>=768?(this.menuToggle.setAttribute("aria-expanded","true"),this.menu.setAttribute("aria-hidden","false"),this.menu.removeAttribute("style")):this.isNavMenuOpen?this.menu.style.height="auto":(this.menuToggle.setAttribute("aria-expanded","false"),this.menu.setAttribute("aria-hidden","true"))}))}setAriaAttributes(){this.navBar.setAttribute("aria-label","Site Navigation Menu"),window.innerWidth>=768?(this.menuToggle.setAttribute("aria-expanded","true"),this.menu.setAttribute("aria-hidden","false")):(this.menuToggle.setAttribute("aria-expanded","false"),this.menu.setAttribute("aria-hidden","true")),this.menuToggle.setAttribute("aria-controls",this.menu.getAttribute("id")),this.navBar.querySelectorAll(".nav-list-dropdown").forEach((t=>{let e=t.querySelector(".nav-dropdown-toggle"),i=t.querySelector(".nav-dropdown");e.setAttribute("aria-controls",i.getAttribute("id")),e.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true")}))}closeOpenMenu(t){this.currentMenuButton&&!t.target.closest(".nav-list-dropdown")&&this.toggleDropdown(this.currentMenuButton)}toggleDropdown(t){const e=document.getElementById(t.getAttribute("aria-controls"));"true"===t.getAttribute("aria-expanded")?(t.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),this.currentMenuButton=!1):(t.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),this.currentMenuButton=t)}toggleMainMenu(t){t.preventDefault(),this.isClosing||!this.isNavMenuOpen?this.openMenu():(this.isExpanding||this.isNavMenuOpen)&&this.closeMenu()}closeMenu(){this.isClosing=!0;const t=`${this.menu.offsetHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.menu.animate({height:[t,"0px"]},{duration:this.transitionTime,easing:this.easing}),this.menu.style.height="0px",this.animation.onfinish=()=>this.onAnimationFinish(!1),this.animation.oncancel=()=>this.isClosing=!1}openMenu(){this.isNavMenuOpen=!0,window.requestAnimationFrame((()=>this.expand()))}expand(){this.isExpanding=!0;const t=`${this.menuHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.menu.animate({height:["0px",t]},{duration:this.transitionTime,easing:this.easing}),this.menu.style.height=t,this.animation.onfinish=()=>this.onAnimationFinish(!0),this.animation.oncancel=()=>this.isExpanding=!1}onAnimationFinish(t){this.isNavMenuOpen=t,this.menu.classList.toggle("menu-open",this.isNavMenuOpen),this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.isNavMenuOpen&&(this.menu.style.height="auto")}getMenuHeight(){return this.menuHeight}setMenuHeight(){this.menuHeight=this.calculateOpenMenuHeight()}calculateOpenMenuHeight(){let t=0;for(let e=0;e<this.menu.children.length;e++)t+=this.menu.children[e].offsetHeight;return t}}return e}()}));
//# sourceMappingURL=neso.js.map